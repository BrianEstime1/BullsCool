<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BullsCool AI ‚Äî Instant HVAC Quote</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #00471B 0%, #006837 100%);
      color: white;
      text-align: center;
      padding: 40px 20px;
      min-height: 100vh;
    }

    .contact-section {
      margin-top: 20px;
      padding: 20px;
      background: rgba(255, 215, 0, 0.15);
      border: 2px solid #FFD700;
      border-radius: 12px;
      text-align: left;
    }

    .contact-section h3 {
      color: #FFD700;
      margin-bottom: 10px;
      font-size: 1.3em;
    }

    .contact-section p {
      margin: 8px 0;
      line-height: 1.6;
    }

    .contact-section a {
      color: #FFD700;
      text-decoration: none;
      font-weight: bold;
    }

    .contact-section a:hover {
      text-decoration: underline;
    }

    .hero {
      background: rgba(0, 0, 0, 0.2);
      padding: 30px 20px;
      border-radius: 15px;
      margin-bottom: 30px;
    }

    h1 { 
      font-size: 3em; 
      margin: 0 0 15px 0;
      letter-spacing: -1px;
    }

    .bulls { 
      color: #FFD700;
    }

    .subtitle {
      font-size: 1.2em;
      font-weight: bold;
      color: #ffffff;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      margin: 0;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      background: rgba(0, 0, 0, 0.5);
      padding: 35px;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    h2 {
      margin-bottom: 25px;
      font-size: 1.8em;
    }

    input, textarea, button, .file-upload-wrapper {
      width: 100%;
      padding: 14px;
      margin: 12px 0;
      border-radius: 10px;
      border: none;
      font-size: 1.1em;
    }

    input, textarea {
      background: white;
      color: #333;
    }

    input::placeholder, textarea::placeholder {
      color: #888;
    }

    textarea {
      resize: vertical;
      min-height: 80px;
      font-family: 'Arial', sans-serif;
    }

    .file-upload-wrapper {
      position: relative;
      background: white;
      border: 2px dashed #ccc;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s;
      text-align: center;
    }

    .file-upload-wrapper:hover {
      border-color: #FFD700;
      background: #f9f9f9;
    }

    .file-upload-wrapper input[type="file"] {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      opacity: 0;
      cursor: pointer;
      padding: 0;
      margin: 0;
    }

    .file-upload-label {
      color: #666;
      font-size: 1em;
      pointer-events: none;
    }

    .file-upload-label.has-file {
      color: #00471B;
      font-weight: bold;
    }

    button {
      background: #FFD700;
      color: #00471B;
      font-weight: bold;
      font-size: 1.2em;
      cursor: pointer;
      transition: all 0.3s;
      border-radius: 16px;
      box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
      margin-top: 20px;
    }

    button:hover { 
      background: white;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
    }

    button:disabled { 
      background: gray;
      cursor: not-allowed;
      box-shadow: none;
      transform: none;
    }

    #result {
      margin-top: 25px;
      padding: 25px;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 15px;
      font-size: 1.1em;
      min-height: 100px;
      text-align: left;
      white-space: pre-wrap;
      line-height: 1.6;
    }

    img.preview { 
      max-width: 100%;
      border-radius: 15px;
      margin: 15px 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    footer {
      margin-top: 50px;
      font-size: 1.1em;
      color: #FFD700;
      font-weight: bold;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 2.2em;
      }

      .subtitle {
        font-size: 1em;
      }

      .container {
        padding: 25px 20px;
      }

      input, textarea, button {
        font-size: 1em;
        padding: 12px;
      }

      button {
        font-size: 1.1em;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 20px 10px;
      }

      h1 {
        font-size: 1.8em;
      }

      .container {
        padding: 20px 15px;
      }
    }
  </style>
</head>
<body>
  <div class="hero">
    <h1>üêÇ Bulls<span class="bulls">Cool</span></h1>
    <p class="subtitle">USF students deserve fast AC quotes in Florida heat ‚Äî Powered by Gemini AI</p>
  </div>

  <div class="container">
    <h2>Get Your Instant Quote</h2>
    
    <input type="text" id="zip" placeholder="ZIP Code (e.g., 33620)" value="33620" required />
    
    <textarea id="desc" rows="3" placeholder="Describe the problem (e.g., AC not blowing cold, weird noise)">AC not blowing cold air</textarea>
    
    <div class="file-upload-wrapper">
      <input type="file" id="photo" accept="image/*" />
      <div class="file-upload-label" id="fileLabel">
        üì∑ Upload photo (tap to browse)
      </div>
    </div>
    
    <img id="preview" class="preview" src="" alt="" style="display:none;" />
    
    <button id="getQuoteBtn" onclick="getQuote()">Get AI Quote (Free)</button>

    <div id="result">Upload a photo, add details, and hit Get Quote for real AI analysis!</div>
  </div>

  <footer>
    Made at HackJam 2025 ‚Äî Go Bulls! üêÇ‚ö°
  </footer>

  <script>
    // ‚ö†Ô∏è IMPORTANT: Replace 'YOUR_API_KEY_HERE' with your actual Gemini API key
    // Get one free at: https://makersuite.google.com/app/apikey
    const GEMINI_API_KEY = 'YOUR_API_KEY_HERE';

    // Update file upload label when file is selected
    document.getElementById("photo").onchange = (e) => {
      const file = e.target.files[0];
      const label = document.getElementById("fileLabel");
      
      if (file) {
        label.textContent = `‚úì ${file.name}`;
        label.classList.add('has-file');
        
        const preview = document.getElementById("preview");
        preview.src = URL.createObjectURL(file);
        preview.style.display = "block";
      } else {
        label.textContent = "üì∑ Upload photo (tap to browse)";
        label.classList.remove('has-file');
      }
    };

    // Convert image file to base64
    function fileToBase64(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = () => resolve(reader.result.split(',')[1]);
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }

    async function getQuote() {
      const zip = document.getElementById("zip").value.trim();
      const desc = document.getElementById("desc").value.trim();
      const photoFile = document.getElementById("photo").files[0];
      const result = document.getElementById("result");
      const btn = document.getElementById("getQuoteBtn");

      // Check if API key is set
      if (GEMINI_API_KEY === 'YOUR_API_KEY_HERE') {
        result.innerHTML = "‚ö†Ô∏è Developer: Please add your Gemini API key to the code!\n\nEdit line 301 and replace 'YOUR_API_KEY_HERE' with your actual key from:\nhttps://makersuite.google.com/app/apikey";
        return;
      }

      // Validation
      if (!zip || !desc) {
        result.innerHTML = "‚ö†Ô∏è Please fill in both ZIP code and description!";
        return;
      }

      if (!photoFile) {
        result.innerHTML = "‚ö†Ô∏è Please upload a photo for AI vision analysis!";
        return;
      }

      btn.disabled = true;
      btn.textContent = "üîç AI Analyzing...";
      result.innerHTML = "üîç Analyzing image with Gemini AI...\n\n‚ö° Processing AC issue in Tampa, FL...";

      try {
        // Convert image to base64
        const imageBase64 = await fileToBase64(photoFile);

        // Prepare the prompt for Gemini
        const prompt = `You are an expert HVAC technician analyzing an AC problem for a college student in Tampa, Florida (ZIP: ${zip}).

Problem Description: ${desc}

Based on the uploaded image and description, provide:

1. üîß DIAGNOSIS: What's wrong with the AC unit?
2. üí∞ ESTIMATED COST: Provide a realistic price range (low-high) for Tampa area
   - Include DIY cost if applicable
   - Include professional service cost
   - Break down by potential issues
3. ‚úÖ RECOMMENDED STEPS: Numbered list of what to do
4. üêÇ BULLS TIP: One helpful tip for college students in Florida's heat

Keep the tone friendly and use emojis. Make it conversational but professional. Focus on being helpful to a student who might not know much about HVAC systems.

Format your response clearly with the sections above.`;

        // Call Gemini API
        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_API_KEY}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            contents: [{
              parts: [
                { text: prompt },
                {
                  inline_data: {
                    mime_type: photoFile.type,
                    data: imageBase64
                  }
                }
              ]
            }]
          })
        });

        if (!response.ok) {
          const errorData = await response.json();
          throw new Error(`API Error: ${response.status} - ${errorData.error?.message || response.statusText}`);
        }

        const data = await response.json();
        
        // Extract the AI response
        const aiResponse = data.candidates[0].content.parts[0].text;

        // Display result with contact section
        result.innerHTML = `ü§ñ AI Analysis Complete!\n\n${aiResponse}\n\nStay cool, Bulls! üêÇ‚ö°

<div class="contact-section">
  <h3>üìû Ready to Fix Your AC?</h3>
  <p><strong>Get Professional Help:</strong></p>
  <p>üîß <strong>FERDAIR LLC</strong> - Trusted HVAC Service</p>
  <p>üì± Call/Text: <a href="tel:5615775327">(561) 577-5327</a></p>
  <p>‚úâÔ∏è Email: <a href="mailto:Ferde.Estime@yahoo.com">Ferde.Estime@yahoo.com</a></p>
  <p style="margin-top: 15px;"><strong>Next Steps:</strong></p>
  <p>1. Screenshot this quote for your records</p>
  <p>2. Contact FERDAIR LLC for professional service</p>
  <p>3. Mention BullsCool for USF student pricing!</p>
</div>`;

      } catch (error) {
        console.error('Error:', error);
        result.innerHTML = `‚ùå Error: ${error.message}\n\nPossible issues:\n‚Ä¢ Invalid API key\n‚Ä¢ Network connection problem\n‚Ä¢ API quota exceeded\n‚Ä¢ Image too large (try smaller image)\n\nCheck browser console (F12) for details.`;
      } finally {
        btn.disabled = false;
        btn.textContent = "Get AI Quote (Free)";
      }
    }
  </script>
</body>
</html>
